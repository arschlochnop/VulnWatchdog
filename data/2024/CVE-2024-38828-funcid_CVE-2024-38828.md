# CVE-2024-38828

> ğŸ“¦ è¯¥CVEæœ‰ **2** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md](../2024/CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md)

## CVE-2024-38828 - Spring MVC @RequestBody byte[] DoS

**æ¼æ´ç¼–å·:** CVE-2024-38828

**æ¼æ´ç±»å‹:** æ‹’ç»æœåŠ¡ (DoS)

**å½±å“åº”ç”¨:** Spring Framework

**å±å®³ç­‰çº§:** ä¸­å±ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨

**å½±å“ç‰ˆæœ¬:** < 5.3.42

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç½‘ç»œè®¿é—®ï¼Œç›®æ ‡åº”ç”¨ä½¿ç”¨äº†Spring MVCï¼Œä¸”å­˜åœ¨æ¥æ”¶ @RequestBody byte[] å‚æ•°çš„Controlleræ–¹æ³•ã€‚

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2024-38828 æ¼æ´å­˜åœ¨äº Spring Framework ä¸­ï¼Œå…·ä½“æ˜¯å½“ Spring MVC Controller æ–¹æ³•ä½¿ç”¨ `@RequestBody byte[]` ä½œä¸ºå‚æ•°æ—¶ï¼Œæœªç»åˆç†é™åˆ¶çš„è¯·æ±‚ä½“å¤§å°å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ã€‚

**æœ‰æ•ˆæ€§:**
æ ¹æ®æä¾›çš„æ¼æ´åº“ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œè¯¥æ¼æ´çš„POCæ˜¯æœ‰æ•ˆçš„ã€‚å¤šä¸ªæ¥æºç¡®è®¤äº†æ­¤æ¼æ´çš„å­˜åœ¨ï¼Œå¹¶æè¿°äº†åˆ©ç”¨æ–¹å¼ã€‚

**åˆ©ç”¨æ–¹å¼:**
æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€å¤§é‡æ•°æ®æˆ–æ„é€ ç‰¹æ®Šçš„æ•°æ®åŒ…åˆ°ä½¿ç”¨äº† `@RequestBody byte[]` å‚æ•°çš„ Controller æ–¹æ³•ï¼Œå¯¼è‡´æœåŠ¡å™¨å†…å­˜æº¢å‡ºæˆ–CPUèµ„æºè€—å°½ï¼Œä»è€Œä½¿æœåŠ¡ä¸å¯ç”¨ã€‚POCä»£ç å°è¯•é€šè¿‡è‡ªå®šä¹‰è½¬æ¢å™¨é™åˆ¶ä¸Šä¼ å¤§å°æ¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†æœªæ¶‰åŠServletè¶…æ—¶è®¾ç½®å’Œä¼˜åŒ– multipart/form-data å¤„ç†ï¼Œå¯èƒ½æ— æ³•å®Œå…¨é˜²å¾¡è¯¥æ¼æ´ã€‚

**æŠ•æ¯’é£é™©:**
POCä»£ç åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ `ByteArrayConverter`ï¼Œè¯¥è½¬æ¢å™¨å°è¯•é™åˆ¶æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°ç»„çš„å¤§å°ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢å™¨æœ¬èº«æ˜¯ä¸ºäº†ç¼“è§£ DoS æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ç»•è¿‡è¯¥é™åˆ¶çš„æ–¹æ³•ï¼Œæˆ–è€…è¯¥è½¬æ¢å™¨å­˜åœ¨å…¶ä»–ç¼ºé™·ï¼Œå¯èƒ½ä¼šè¢«åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶å¤§å°çš„é€»è¾‘å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼ŒREADMEæåˆ°ï¼Œä¸ºå®Œå…¨è¦†ç›–è¯¥æ¼æ´éœ€è¦å®‰è£… servlet è¶…æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªå®‰è£…ï¼Œåˆ™å¯èƒ½å­˜åœ¨éƒ¨åˆ†é£é™©ã€‚POM.xmlä¸­ä½¿ç”¨çš„æ˜¯spring-boot-starter-parent 2.3.3.RELEASEç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ã€‚æ‰€ä»¥è¯„ä¼°æŠ•æ¯’é£é™©ä¸º10%ã€‚

**é¡¹ç›®åœ°å€:** [First-Roman/sprig-mvc-demo-patch](https://github.com/First-Roman/sprig-mvc-demo-patch)

**æ¼æ´è¯¦æƒ…:** [CVE-2024-38828](https://nvd.nist.gov/vuln/detail/CVE-2024-38828)

---

## POC #2

**æ¥æº**: [CVE-2024-38828-funcid_CVE-2024-38828.md](../2024/CVE-2024-38828-funcid_CVE-2024-38828.md)

# CVE-2024-38828

> ğŸ“¦ è¯¥CVEæœ‰ **2** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md](../2024/CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md)

## CVE-2024-38828 - Spring MVC @RequestBody byte[] DoS

**æ¼æ´ç¼–å·:** CVE-2024-38828

**æ¼æ´ç±»å‹:** æ‹’ç»æœåŠ¡ (DoS)

**å½±å“åº”ç”¨:** Spring Framework

**å±å®³ç­‰çº§:** ä¸­å±ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨

**å½±å“ç‰ˆæœ¬:** < 5.3.42

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç½‘ç»œè®¿é—®ï¼Œç›®æ ‡åº”ç”¨ä½¿ç”¨äº†Spring MVCï¼Œä¸”å­˜åœ¨æ¥æ”¶ @RequestBody byte[] å‚æ•°çš„Controlleræ–¹æ³•ã€‚

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2024-38828 æ¼æ´å­˜åœ¨äº Spring Framework ä¸­ï¼Œå…·ä½“æ˜¯å½“ Spring MVC Controller æ–¹æ³•ä½¿ç”¨ `@RequestBody byte[]` ä½œä¸ºå‚æ•°æ—¶ï¼Œæœªç»åˆç†é™åˆ¶çš„è¯·æ±‚ä½“å¤§å°å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ã€‚

**æœ‰æ•ˆæ€§:**
æ ¹æ®æä¾›çš„æ¼æ´åº“ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œè¯¥æ¼æ´çš„POCæ˜¯æœ‰æ•ˆçš„ã€‚å¤šä¸ªæ¥æºç¡®è®¤äº†æ­¤æ¼æ´çš„å­˜åœ¨ï¼Œå¹¶æè¿°äº†åˆ©ç”¨æ–¹å¼ã€‚

**åˆ©ç”¨æ–¹å¼:**
æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€å¤§é‡æ•°æ®æˆ–æ„é€ ç‰¹æ®Šçš„æ•°æ®åŒ…åˆ°ä½¿ç”¨äº† `@RequestBody byte[]` å‚æ•°çš„ Controller æ–¹æ³•ï¼Œå¯¼è‡´æœåŠ¡å™¨å†…å­˜æº¢å‡ºæˆ–CPUèµ„æºè€—å°½ï¼Œä»è€Œä½¿æœåŠ¡ä¸å¯ç”¨ã€‚POCä»£ç å°è¯•é€šè¿‡è‡ªå®šä¹‰è½¬æ¢å™¨é™åˆ¶ä¸Šä¼ å¤§å°æ¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†æœªæ¶‰åŠServletè¶…æ—¶è®¾ç½®å’Œä¼˜åŒ– multipart/form-data å¤„ç†ï¼Œå¯èƒ½æ— æ³•å®Œå…¨é˜²å¾¡è¯¥æ¼æ´ã€‚

**æŠ•æ¯’é£é™©:**
POCä»£ç åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ `ByteArrayConverter`ï¼Œè¯¥è½¬æ¢å™¨å°è¯•é™åˆ¶æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°ç»„çš„å¤§å°ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢å™¨æœ¬èº«æ˜¯ä¸ºäº†ç¼“è§£ DoS æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ç»•è¿‡è¯¥é™åˆ¶çš„æ–¹æ³•ï¼Œæˆ–è€…è¯¥è½¬æ¢å™¨å­˜åœ¨å…¶ä»–ç¼ºé™·ï¼Œå¯èƒ½ä¼šè¢«åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶å¤§å°çš„é€»è¾‘å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼ŒREADMEæåˆ°ï¼Œä¸ºå®Œå…¨è¦†ç›–è¯¥æ¼æ´éœ€è¦å®‰è£… servlet è¶…æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªå®‰è£…ï¼Œåˆ™å¯èƒ½å­˜åœ¨éƒ¨åˆ†é£é™©ã€‚POM.xmlä¸­ä½¿ç”¨çš„æ˜¯spring-boot-starter-parent 2.3.3.RELEASEç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ã€‚æ‰€ä»¥è¯„ä¼°æŠ•æ¯’é£é™©ä¸º10%ã€‚

**é¡¹ç›®åœ°å€:** [First-Roman/sprig-mvc-demo-patch](https://github.com/First-Roman/sprig-mvc-demo-patch)

**æ¼æ´è¯¦æƒ…:** [CVE-2024-38828](https://nvd.nist.gov/vuln/detail/CVE-2024-38828)

---

## POC #2

**æ¥æº**: [CVE-2024-38828-funcid_CVE-2024-38828.md](../2024/CVE-2024-38828-funcid_CVE-2024-38828.md)

# CVE-2024-38828

> ğŸ“¦ è¯¥CVEæœ‰ **2** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md](../2024/CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md)

## CVE-2024-38828 - Spring MVC @RequestBody byte[] DoS

**æ¼æ´ç¼–å·:** CVE-2024-38828

**æ¼æ´ç±»å‹:** æ‹’ç»æœåŠ¡ (DoS)

**å½±å“åº”ç”¨:** Spring Framework

**å±å®³ç­‰çº§:** ä¸­å±ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨

**å½±å“ç‰ˆæœ¬:** < 5.3.42

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç½‘ç»œè®¿é—®ï¼Œç›®æ ‡åº”ç”¨ä½¿ç”¨äº†Spring MVCï¼Œä¸”å­˜åœ¨æ¥æ”¶ @RequestBody byte[] å‚æ•°çš„Controlleræ–¹æ³•ã€‚

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2024-38828 æ¼æ´å­˜åœ¨äº Spring Framework ä¸­ï¼Œå…·ä½“æ˜¯å½“ Spring MVC Controller æ–¹æ³•ä½¿ç”¨ `@RequestBody byte[]` ä½œä¸ºå‚æ•°æ—¶ï¼Œæœªç»åˆç†é™åˆ¶çš„è¯·æ±‚ä½“å¤§å°å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ã€‚

**æœ‰æ•ˆæ€§:**
æ ¹æ®æä¾›çš„æ¼æ´åº“ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œè¯¥æ¼æ´çš„POCæ˜¯æœ‰æ•ˆçš„ã€‚å¤šä¸ªæ¥æºç¡®è®¤äº†æ­¤æ¼æ´çš„å­˜åœ¨ï¼Œå¹¶æè¿°äº†åˆ©ç”¨æ–¹å¼ã€‚

**åˆ©ç”¨æ–¹å¼:**
æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€å¤§é‡æ•°æ®æˆ–æ„é€ ç‰¹æ®Šçš„æ•°æ®åŒ…åˆ°ä½¿ç”¨äº† `@RequestBody byte[]` å‚æ•°çš„ Controller æ–¹æ³•ï¼Œå¯¼è‡´æœåŠ¡å™¨å†…å­˜æº¢å‡ºæˆ–CPUèµ„æºè€—å°½ï¼Œä»è€Œä½¿æœåŠ¡ä¸å¯ç”¨ã€‚POCä»£ç å°è¯•é€šè¿‡è‡ªå®šä¹‰è½¬æ¢å™¨é™åˆ¶ä¸Šä¼ å¤§å°æ¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†æœªæ¶‰åŠServletè¶…æ—¶è®¾ç½®å’Œä¼˜åŒ– multipart/form-data å¤„ç†ï¼Œå¯èƒ½æ— æ³•å®Œå…¨é˜²å¾¡è¯¥æ¼æ´ã€‚

**æŠ•æ¯’é£é™©:**
POCä»£ç åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ `ByteArrayConverter`ï¼Œè¯¥è½¬æ¢å™¨å°è¯•é™åˆ¶æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°ç»„çš„å¤§å°ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢å™¨æœ¬èº«æ˜¯ä¸ºäº†ç¼“è§£ DoS æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ç»•è¿‡è¯¥é™åˆ¶çš„æ–¹æ³•ï¼Œæˆ–è€…è¯¥è½¬æ¢å™¨å­˜åœ¨å…¶ä»–ç¼ºé™·ï¼Œå¯èƒ½ä¼šè¢«åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶å¤§å°çš„é€»è¾‘å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼ŒREADMEæåˆ°ï¼Œä¸ºå®Œå…¨è¦†ç›–è¯¥æ¼æ´éœ€è¦å®‰è£… servlet è¶…æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªå®‰è£…ï¼Œåˆ™å¯èƒ½å­˜åœ¨éƒ¨åˆ†é£é™©ã€‚POM.xmlä¸­ä½¿ç”¨çš„æ˜¯spring-boot-starter-parent 2.3.3.RELEASEç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ã€‚æ‰€ä»¥è¯„ä¼°æŠ•æ¯’é£é™©ä¸º10%ã€‚

**é¡¹ç›®åœ°å€:** [First-Roman/sprig-mvc-demo-patch](https://github.com/First-Roman/sprig-mvc-demo-patch)

**æ¼æ´è¯¦æƒ…:** [CVE-2024-38828](https://nvd.nist.gov/vuln/detail/CVE-2024-38828)

---

## POC #2

**æ¥æº**: [CVE-2024-38828-funcid_CVE-2024-38828.md](../2024/CVE-2024-38828-funcid_CVE-2024-38828.md)

# CVE-2024-38828

> ğŸ“¦ è¯¥CVEæœ‰ **2** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md](../2024/CVE-2024-38828-First-Roman_sprig-mvc-demo-patch.md)

## CVE-2024-38828 - Spring MVC @RequestBody byte[] DoS

**æ¼æ´ç¼–å·:** CVE-2024-38828

**æ¼æ´ç±»å‹:** æ‹’ç»æœåŠ¡ (DoS)

**å½±å“åº”ç”¨:** Spring Framework

**å±å®³ç­‰çº§:** ä¸­å±ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨

**å½±å“ç‰ˆæœ¬:** < 5.3.42

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç½‘ç»œè®¿é—®ï¼Œç›®æ ‡åº”ç”¨ä½¿ç”¨äº†Spring MVCï¼Œä¸”å­˜åœ¨æ¥æ”¶ @RequestBody byte[] å‚æ•°çš„Controlleræ–¹æ³•ã€‚

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2024-38828 æ¼æ´å­˜åœ¨äº Spring Framework ä¸­ï¼Œå…·ä½“æ˜¯å½“ Spring MVC Controller æ–¹æ³•ä½¿ç”¨ `@RequestBody byte[]` ä½œä¸ºå‚æ•°æ—¶ï¼Œæœªç»åˆç†é™åˆ¶çš„è¯·æ±‚ä½“å¤§å°å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ã€‚

**æœ‰æ•ˆæ€§:**
æ ¹æ®æä¾›çš„æ¼æ´åº“ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œè¯¥æ¼æ´çš„POCæ˜¯æœ‰æ•ˆçš„ã€‚å¤šä¸ªæ¥æºç¡®è®¤äº†æ­¤æ¼æ´çš„å­˜åœ¨ï¼Œå¹¶æè¿°äº†åˆ©ç”¨æ–¹å¼ã€‚

**åˆ©ç”¨æ–¹å¼:**
æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€å¤§é‡æ•°æ®æˆ–æ„é€ ç‰¹æ®Šçš„æ•°æ®åŒ…åˆ°ä½¿ç”¨äº† `@RequestBody byte[]` å‚æ•°çš„ Controller æ–¹æ³•ï¼Œå¯¼è‡´æœåŠ¡å™¨å†…å­˜æº¢å‡ºæˆ–CPUèµ„æºè€—å°½ï¼Œä»è€Œä½¿æœåŠ¡ä¸å¯ç”¨ã€‚POCä»£ç å°è¯•é€šè¿‡è‡ªå®šä¹‰è½¬æ¢å™¨é™åˆ¶ä¸Šä¼ å¤§å°æ¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†æœªæ¶‰åŠServletè¶…æ—¶è®¾ç½®å’Œä¼˜åŒ– multipart/form-data å¤„ç†ï¼Œå¯èƒ½æ— æ³•å®Œå…¨é˜²å¾¡è¯¥æ¼æ´ã€‚

**æŠ•æ¯’é£é™©:**
POCä»£ç åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ `ByteArrayConverter`ï¼Œè¯¥è½¬æ¢å™¨å°è¯•é™åˆ¶æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°ç»„çš„å¤§å°ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢å™¨æœ¬èº«æ˜¯ä¸ºäº†ç¼“è§£ DoS æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ç»•è¿‡è¯¥é™åˆ¶çš„æ–¹æ³•ï¼Œæˆ–è€…è¯¥è½¬æ¢å™¨å­˜åœ¨å…¶ä»–ç¼ºé™·ï¼Œå¯èƒ½ä¼šè¢«åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶å¤§å°çš„é€»è¾‘å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼ŒREADMEæåˆ°ï¼Œä¸ºå®Œå…¨è¦†ç›–è¯¥æ¼æ´éœ€è¦å®‰è£… servlet è¶…æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªå®‰è£…ï¼Œåˆ™å¯èƒ½å­˜åœ¨éƒ¨åˆ†é£é™©ã€‚POM.xmlä¸­ä½¿ç”¨çš„æ˜¯spring-boot-starter-parent 2.3.3.RELEASEç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ã€‚æ‰€ä»¥è¯„ä¼°æŠ•æ¯’é£é™©ä¸º10%ã€‚

**é¡¹ç›®åœ°å€:** [First-Roman/sprig-mvc-demo-patch](https://github.com/First-Roman/sprig-mvc-demo-patch)

**æ¼æ´è¯¦æƒ…:** [CVE-2024-38828](https://nvd.nist.gov/vuln/detail/CVE-2024-38828)

---

## POC #2

**æ¥æº**: [CVE-2024-38828-funcid_CVE-2024-38828.md](../2024/CVE-2024-38828-funcid_CVE-2024-38828.md)

## CVE-2024-38828 - Spring MVC @RequestBody byte[] DoS

**æ¼æ´ç¼–å·:** CVE-2024-38828

**æ¼æ´ç±»å‹:** æ‹’ç»æœåŠ¡ (DoS)

**å½±å“åº”ç”¨:** Spring Framework

**å±å®³ç­‰çº§:** ä¸­å±ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸å¯ç”¨

**å½±å“ç‰ˆæœ¬:** < 5.3.42

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç½‘ç»œè®¿é—®ï¼Œç›®æ ‡åº”ç”¨ä½¿ç”¨äº†Spring MVCï¼Œä¸”å­˜åœ¨æ¥æ”¶ @RequestBody byte[] å‚æ•°çš„Controlleræ–¹æ³•ã€‚

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2024-38828 æ¼æ´å­˜åœ¨äº Spring Framework ä¸­ï¼Œå…·ä½“æ˜¯å½“ Spring MVC Controller æ–¹æ³•ä½¿ç”¨ `@RequestBody byte[]` ä½œä¸ºå‚æ•°æ—¶ï¼Œæœªç»åˆç†é™åˆ¶çš„è¯·æ±‚ä½“å¤§å°å¯èƒ½å¯¼è‡´æœåŠ¡å™¨èµ„æºè€—å°½ï¼Œä»è€Œå¼•å‘æ‹’ç»æœåŠ¡æ”»å‡»ã€‚

**æœ‰æ•ˆæ€§:**
æ ¹æ®æä¾›çš„æ¼æ´åº“ä¿¡æ¯å’Œæœç´¢ç»“æœï¼Œè¯¥æ¼æ´çš„POCæ˜¯æœ‰æ•ˆçš„ã€‚å¤šä¸ªæ¥æºç¡®è®¤äº†æ­¤æ¼æ´çš„å­˜åœ¨ï¼Œå¹¶æè¿°äº†åˆ©ç”¨æ–¹å¼ã€‚

**åˆ©ç”¨æ–¹å¼:**
æ”»å‡»è€…å¯ä»¥é€šè¿‡å‘é€å¤§é‡æ•°æ®æˆ–æ„é€ ç‰¹æ®Šçš„æ•°æ®åŒ…åˆ°ä½¿ç”¨äº† `@RequestBody byte[]` å‚æ•°çš„ Controller æ–¹æ³•ï¼Œå¯¼è‡´æœåŠ¡å™¨å†…å­˜æº¢å‡ºæˆ–CPUèµ„æºè€—å°½ï¼Œä»è€Œä½¿æœåŠ¡ä¸å¯ç”¨ã€‚POCä»£ç å°è¯•é€šè¿‡è‡ªå®šä¹‰è½¬æ¢å™¨é™åˆ¶ä¸Šä¼ å¤§å°æ¥ç¼“è§£æ­¤é—®é¢˜ï¼Œä½†æœªæ¶‰åŠServletè¶…æ—¶è®¾ç½®å’Œä¼˜åŒ– multipart/form-data å¤„ç†ï¼Œå¯èƒ½æ— æ³•å®Œå…¨é˜²å¾¡è¯¥æ¼æ´ã€‚

**æŠ•æ¯’é£é™©:**
POCä»£ç åŒ…å«ä¸€ä¸ªè‡ªå®šä¹‰çš„ `ByteArrayConverter`ï¼Œè¯¥è½¬æ¢å™¨å°è¯•é™åˆ¶æ¥æ”¶åˆ°çš„å­—èŠ‚æ•°ç»„çš„å¤§å°ã€‚è™½ç„¶è¿™ä¸ªè½¬æ¢å™¨æœ¬èº«æ˜¯ä¸ºäº†ç¼“è§£ DoS æ¼æ´ï¼Œä½†æ˜¯å¦‚æœæ”»å‡»è€…æ‰¾åˆ°ç»•è¿‡è¯¥é™åˆ¶çš„æ–¹æ³•ï¼Œæˆ–è€…è¯¥è½¬æ¢å™¨å­˜åœ¨å…¶ä»–ç¼ºé™·ï¼Œå¯èƒ½ä¼šè¢«åˆ©ç”¨ã€‚ä¾‹å¦‚ï¼Œå¦‚æœé™åˆ¶å¤§å°çš„é€»è¾‘å­˜åœ¨é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´ç¨‹åºå´©æºƒæˆ–å…¶ä»–ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚æ­¤å¤–ï¼ŒREADMEæåˆ°ï¼Œä¸ºå®Œå…¨è¦†ç›–è¯¥æ¼æ´éœ€è¦å®‰è£… servlet è¶…æ—¶ï¼Œå¦‚æœç”¨æˆ·æœªå®‰è£…ï¼Œåˆ™å¯èƒ½å­˜åœ¨éƒ¨åˆ†é£é™©ã€‚POM.xmlä¸­ä½¿ç”¨çš„æ˜¯spring-boot-starter-parent 2.3.3.RELEASEç‰ˆæœ¬ï¼Œå­˜åœ¨ä¸€å®šçš„å®‰å…¨é£é™©ï¼Œå› ä¸ºè¯¥ç‰ˆæœ¬æ¯”è¾ƒè€æ—§ã€‚æ‰€ä»¥è¯„ä¼°æŠ•æ¯’é£é™©ä¸º10%ã€‚

**é¡¹ç›®åœ°å€:** [First-Roman/sprig-mvc-demo-patch](https://github.com/First-Roman/sprig-mvc-demo-patch)

**æ¼æ´è¯¦æƒ…:** [CVE-2024-38828](https://nvd.nist.gov/vuln/detail/CVE-2024-38828)

---



---



---



---

