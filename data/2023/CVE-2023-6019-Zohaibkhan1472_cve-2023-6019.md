# CVE-2023-6019

> ğŸ“¦ è¯¥CVEæœ‰ **3** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2023-6019-Clydeston_CVE-2023-6019.md](../2023/CVE-2023-6019-Clydeston_CVE-2023-6019.md)

## CVE-2023-6019 Ray Command Injection in cpu_profile Parameter

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** å‘½ä»¤æ³¨å…¥

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå…è®¸è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** < 2.8.1

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç›®æ ‡ç³»ç»Ÿè¿è¡Œå­˜åœ¨æ¼æ´çš„Ray Dashboardä¸”å¯ç½‘ç»œè®¿é—®

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 0%

## è¯¦æƒ…

è¯¥æ¼æ´å­˜åœ¨äº Ray çš„ cpu_profile URL å‚æ•°ä¸­ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„ URLï¼Œåˆ©ç”¨å‘½ä»¤æ³¨å…¥æ¼æ´åœ¨è¿è¡Œ Ray Dashboard çš„ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œè€Œæ— éœ€èº«ä»½éªŒè¯ã€‚POC ä»£ç é€šè¿‡å‘ `/worker/cpu_profile` ç«¯ç‚¹å‘é€åŒ…å« base64 ç¼–ç åå¼¹ shell å‘½ä»¤çš„ HTTP GET è¯·æ±‚ï¼Œåˆ©ç”¨ `echo`ã€`base64` å’Œ `sh` å‘½ä»¤æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ 

**æ¼æ´åˆ©ç”¨åˆ†æï¼š**
1.  æ¼æ´ä½äº Ray Dashboard çš„ `/worker/cpu_profile` ç«¯ç‚¹ã€‚
2.  `pid`, `ip`, `duration`, `native`, `format`å‚æ•°å€¼å¯æ§ï¼Œå…¶ä¸­`format`å‚æ•°å­˜åœ¨å‘½ä»¤æ³¨å…¥ã€‚
3.  POC ä»£ç ä½¿ç”¨ `echo`ã€`base64` è§£ç å¹¶ä½¿ç”¨ `sh` æ‰§è¡Œå‘½ä»¤ï¼Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚
4.  POC ä»£ç é¦–å…ˆå°†åå¼¹ shell å‘½ä»¤è¿›è¡Œ base64 ç¼–ç ã€‚
5.  æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„ URLï¼Œå¹¶ä½¿ç”¨ `requests.get` å‘é€è¯·æ±‚ã€‚
6.  ç›®æ ‡ç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ‰§è¡Œ URL ä¸­æ³¨å…¥çš„å‘½ä»¤ï¼Œä»è€Œå®ç°åå¼¹ shellã€‚

**æŠ•æ¯’é£é™©åˆ†æï¼š**
æŸ¥çœ‹äº† `CVE-2023-6019.py` å’Œ `README.md` æ–‡ä»¶ï¼Œè¯¥ä»“åº“ä¼¼ä¹æ²¡æœ‰æ˜æ˜¾çš„æŠ•æ¯’ä»£ç ã€‚

ä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆ©ç”¨æ¼æ´å®ç°åå¼¹ shellï¼Œå¹¶æ²¡å‘ç°å…¶ä»–æ¶æ„è¡Œä¸ºã€‚æ‰€ä»¥æŠ•æ¯’é£é™©æä½ï¼Œåˆ¤å®šä¸º 0%ã€‚

**é¡¹ç›®åœ°å€:** [Clydeston/CVE-2023-6019](https://github.com/Clydeston/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---

## POC #2

**æ¥æº**: [CVE-2023-6019-FireWolfWang_CVE-2023-6019.md](../2023/CVE-2023-6019-FireWolfWang_CVE-2023-6019.md)

## CVE-2023-6019 - Ray OS Command Injection

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** OS Command Injection

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** <= 2.8.0 (æ¨æµ‹ï¼Œæ¼æ´åº“ä¿¡æ¯æ˜¾ç¤ºå·²ä¿®å¤ç‰ˆæœ¬ä¸º2.8.1+)

**åˆ©ç”¨æ¡ä»¶:** Ray dashboardéœ€è¦å¼€å¯ä¸”ç›®æ ‡ç³»ç»Ÿå­˜åœ¨æ¼æ´ï¼Œæ— éœ€èº«ä»½éªŒè¯

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2023-6019æ˜¯Rayæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥æ¼æ´ï¼Œå­˜åœ¨äºRay dashboardçš„cpu_profile URLå‚æ•°ä¸­ã€‚ç”±äºRay dashboardå¯¹cpu_profileå‚æ•°å¤„ç†ä¸å½“ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„URLï¼Œå°†æ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥åˆ°åå°æ‰§è¡Œï¼Œä»è€Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚æ¼æ´åˆ©ç”¨ä»£ç æ˜¾ç¤ºï¼Œå®ƒå°†base64ç¼–ç çš„payloadæ³¨å…¥åˆ°`format`å‚æ•°ä¸­ã€‚Payloadæ˜¯ä¸€ä¸ªåå¼¹shellï¼Œä¼šè¿æ¥åˆ°æ”»å‡»è€…æŒ‡å®šçš„lhostå’Œlportã€‚è¯¥æ¼æ´æ— éœ€èº«ä»½éªŒè¯å³å¯åˆ©ç”¨ã€‚æ£€æŸ¥æŠ•æ¯’é£é™©ï¼šè™½ç„¶ä»£ç åŠŸèƒ½ä¸Šæ˜¯å®ç°äº†æ¼æ´åˆ©ç”¨ï¼Œä½†è€ƒè™‘åˆ°è¯¥POCéœ€è¦ç”¨æˆ·æŒ‡å®šåå¼¹shellçš„IPåœ°å€å’Œç«¯å£ï¼Œä¸”åˆ©ç”¨çš„æ˜¯å…¬å¼€çš„æ¼æ´ä¿¡æ¯ï¼Œå¯ä»¥åˆ¤å®šæŠ•æ¯’çš„å¯èƒ½æ€§è¾ƒä½ã€‚æŠ•æ¯’é£é™©åˆ†æ: ä¸»è¦é£é™©å¯èƒ½åœ¨äºPayloadéƒ¨åˆ†è¢«æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤ï¼Œä½†ç”±äºpayload base64 ç¼–ç ï¼Œå®¹æ˜“è¢«å‘ç°ã€‚æ¼æ´åˆ©ç”¨æ–¹å¼ï¼šæ”»å‡»è€…æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„URLï¼Œå‘é€åˆ°å­˜åœ¨æ¼æ´çš„Ray dashboardã€‚æœåŠ¡ç«¯æœªå¯¹URLä¸­çš„cpu_profileå‚æ•°è¿›è¡Œå……åˆ†éªŒè¯ï¼Œå¯¼è‡´æ¶æ„å‘½ä»¤è¢«æ‰§è¡Œï¼Œæ”»å‡»è€…è·å–ç›®æ ‡ç³»ç»Ÿçš„shellã€‚

**æœ‰æ•ˆæ€§ï¼š**  æ ¹æ®æ¼æ´åº“ä¿¡æ¯ã€æœç´¢å¼•æ“ç»“æœï¼ˆå‡è®¾æœ‰æ›´å¤šç»†èŠ‚ï¼‰å’Œæä¾›çš„æ¼æ´åˆ©ç”¨ä»£ç ï¼Œè¯¥æ¼æ´çš„POCä»£ç æ˜¯æœ‰æ•ˆçš„ã€‚

**æŠ•æ¯’é£é™©ï¼š**  POCä»£ç çš„æŠ•æ¯’é£é™©è¯„ä¼°ä¸º10%ã€‚è™½ç„¶ä¸»è¦åŠŸèƒ½æ˜¯æ¼æ´åˆ©ç”¨ï¼Œä½†æ˜¯payloadå­˜åœ¨å¯æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤çš„é£é™©ã€‚

**åˆ©ç”¨æ–¹å¼ï¼š** æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„`cpu_profile` URLå‚æ•°ï¼Œåœ¨ç›®æ ‡ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„OSå‘½ä»¤ã€‚è¯¥URLåŒ…å«äº†ç»è¿‡Base64ç¼–ç çš„åå¼¹shell payloadã€‚å¦‚æœç›®æ ‡æœºå™¨é…ç½®äº†å…å¯†sudoï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—rootæƒé™çš„shellã€‚å¦åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—å½“å‰ç”¨æˆ·çš„shellã€‚

**é¡¹ç›®åœ°å€:** [FireWolfWang/CVE-2023-6019](https://github.com/FireWolfWang/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---

## POC #3

**æ¥æº**: [CVE-2023-6019-Zohaibkhan1472_cve-2023-6019.md](../2023/CVE-2023-6019-Zohaibkhan1472_cve-2023-6019.md)

# CVE-2023-6019

> ğŸ“¦ è¯¥CVEæœ‰ **3** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2023-6019-Clydeston_CVE-2023-6019.md](../2023/CVE-2023-6019-Clydeston_CVE-2023-6019.md)

## CVE-2023-6019 Ray Command Injection in cpu_profile Parameter

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** å‘½ä»¤æ³¨å…¥

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå…è®¸è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** < 2.8.1

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç›®æ ‡ç³»ç»Ÿè¿è¡Œå­˜åœ¨æ¼æ´çš„Ray Dashboardä¸”å¯ç½‘ç»œè®¿é—®

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 0%

## è¯¦æƒ…

è¯¥æ¼æ´å­˜åœ¨äº Ray çš„ cpu_profile URL å‚æ•°ä¸­ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„ URLï¼Œåˆ©ç”¨å‘½ä»¤æ³¨å…¥æ¼æ´åœ¨è¿è¡Œ Ray Dashboard çš„ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œè€Œæ— éœ€èº«ä»½éªŒè¯ã€‚POC ä»£ç é€šè¿‡å‘ `/worker/cpu_profile` ç«¯ç‚¹å‘é€åŒ…å« base64 ç¼–ç åå¼¹ shell å‘½ä»¤çš„ HTTP GET è¯·æ±‚ï¼Œåˆ©ç”¨ `echo`ã€`base64` å’Œ `sh` å‘½ä»¤æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ 

**æ¼æ´åˆ©ç”¨åˆ†æï¼š**
1.  æ¼æ´ä½äº Ray Dashboard çš„ `/worker/cpu_profile` ç«¯ç‚¹ã€‚
2.  `pid`, `ip`, `duration`, `native`, `format`å‚æ•°å€¼å¯æ§ï¼Œå…¶ä¸­`format`å‚æ•°å­˜åœ¨å‘½ä»¤æ³¨å…¥ã€‚
3.  POC ä»£ç ä½¿ç”¨ `echo`ã€`base64` è§£ç å¹¶ä½¿ç”¨ `sh` æ‰§è¡Œå‘½ä»¤ï¼Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚
4.  POC ä»£ç é¦–å…ˆå°†åå¼¹ shell å‘½ä»¤è¿›è¡Œ base64 ç¼–ç ã€‚
5.  æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„ URLï¼Œå¹¶ä½¿ç”¨ `requests.get` å‘é€è¯·æ±‚ã€‚
6.  ç›®æ ‡ç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ‰§è¡Œ URL ä¸­æ³¨å…¥çš„å‘½ä»¤ï¼Œä»è€Œå®ç°åå¼¹ shellã€‚

**æŠ•æ¯’é£é™©åˆ†æï¼š**
æŸ¥çœ‹äº† `CVE-2023-6019.py` å’Œ `README.md` æ–‡ä»¶ï¼Œè¯¥ä»“åº“ä¼¼ä¹æ²¡æœ‰æ˜æ˜¾çš„æŠ•æ¯’ä»£ç ã€‚

ä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆ©ç”¨æ¼æ´å®ç°åå¼¹ shellï¼Œå¹¶æ²¡å‘ç°å…¶ä»–æ¶æ„è¡Œä¸ºã€‚æ‰€ä»¥æŠ•æ¯’é£é™©æä½ï¼Œåˆ¤å®šä¸º 0%ã€‚

**é¡¹ç›®åœ°å€:** [Clydeston/CVE-2023-6019](https://github.com/Clydeston/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---

## POC #2

**æ¥æº**: [CVE-2023-6019-FireWolfWang_CVE-2023-6019.md](../2023/CVE-2023-6019-FireWolfWang_CVE-2023-6019.md)

## CVE-2023-6019 - Ray OS Command Injection

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** OS Command Injection

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** <= 2.8.0 (æ¨æµ‹ï¼Œæ¼æ´åº“ä¿¡æ¯æ˜¾ç¤ºå·²ä¿®å¤ç‰ˆæœ¬ä¸º2.8.1+)

**åˆ©ç”¨æ¡ä»¶:** Ray dashboardéœ€è¦å¼€å¯ä¸”ç›®æ ‡ç³»ç»Ÿå­˜åœ¨æ¼æ´ï¼Œæ— éœ€èº«ä»½éªŒè¯

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2023-6019æ˜¯Rayæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥æ¼æ´ï¼Œå­˜åœ¨äºRay dashboardçš„cpu_profile URLå‚æ•°ä¸­ã€‚ç”±äºRay dashboardå¯¹cpu_profileå‚æ•°å¤„ç†ä¸å½“ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„URLï¼Œå°†æ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥åˆ°åå°æ‰§è¡Œï¼Œä»è€Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚æ¼æ´åˆ©ç”¨ä»£ç æ˜¾ç¤ºï¼Œå®ƒå°†base64ç¼–ç çš„payloadæ³¨å…¥åˆ°`format`å‚æ•°ä¸­ã€‚Payloadæ˜¯ä¸€ä¸ªåå¼¹shellï¼Œä¼šè¿æ¥åˆ°æ”»å‡»è€…æŒ‡å®šçš„lhostå’Œlportã€‚è¯¥æ¼æ´æ— éœ€èº«ä»½éªŒè¯å³å¯åˆ©ç”¨ã€‚æ£€æŸ¥æŠ•æ¯’é£é™©ï¼šè™½ç„¶ä»£ç åŠŸèƒ½ä¸Šæ˜¯å®ç°äº†æ¼æ´åˆ©ç”¨ï¼Œä½†è€ƒè™‘åˆ°è¯¥POCéœ€è¦ç”¨æˆ·æŒ‡å®šåå¼¹shellçš„IPåœ°å€å’Œç«¯å£ï¼Œä¸”åˆ©ç”¨çš„æ˜¯å…¬å¼€çš„æ¼æ´ä¿¡æ¯ï¼Œå¯ä»¥åˆ¤å®šæŠ•æ¯’çš„å¯èƒ½æ€§è¾ƒä½ã€‚æŠ•æ¯’é£é™©åˆ†æ: ä¸»è¦é£é™©å¯èƒ½åœ¨äºPayloadéƒ¨åˆ†è¢«æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤ï¼Œä½†ç”±äºpayload base64 ç¼–ç ï¼Œå®¹æ˜“è¢«å‘ç°ã€‚æ¼æ´åˆ©ç”¨æ–¹å¼ï¼šæ”»å‡»è€…æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„URLï¼Œå‘é€åˆ°å­˜åœ¨æ¼æ´çš„Ray dashboardã€‚æœåŠ¡ç«¯æœªå¯¹URLä¸­çš„cpu_profileå‚æ•°è¿›è¡Œå……åˆ†éªŒè¯ï¼Œå¯¼è‡´æ¶æ„å‘½ä»¤è¢«æ‰§è¡Œï¼Œæ”»å‡»è€…è·å–ç›®æ ‡ç³»ç»Ÿçš„shellã€‚

**æœ‰æ•ˆæ€§ï¼š**  æ ¹æ®æ¼æ´åº“ä¿¡æ¯ã€æœç´¢å¼•æ“ç»“æœï¼ˆå‡è®¾æœ‰æ›´å¤šç»†èŠ‚ï¼‰å’Œæä¾›çš„æ¼æ´åˆ©ç”¨ä»£ç ï¼Œè¯¥æ¼æ´çš„POCä»£ç æ˜¯æœ‰æ•ˆçš„ã€‚

**æŠ•æ¯’é£é™©ï¼š**  POCä»£ç çš„æŠ•æ¯’é£é™©è¯„ä¼°ä¸º10%ã€‚è™½ç„¶ä¸»è¦åŠŸèƒ½æ˜¯æ¼æ´åˆ©ç”¨ï¼Œä½†æ˜¯payloadå­˜åœ¨å¯æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤çš„é£é™©ã€‚

**åˆ©ç”¨æ–¹å¼ï¼š** æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„`cpu_profile` URLå‚æ•°ï¼Œåœ¨ç›®æ ‡ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„OSå‘½ä»¤ã€‚è¯¥URLåŒ…å«äº†ç»è¿‡Base64ç¼–ç çš„åå¼¹shell payloadã€‚å¦‚æœç›®æ ‡æœºå™¨é…ç½®äº†å…å¯†sudoï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—rootæƒé™çš„shellã€‚å¦åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—å½“å‰ç”¨æˆ·çš„shellã€‚

**é¡¹ç›®åœ°å€:** [FireWolfWang/CVE-2023-6019](https://github.com/FireWolfWang/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---

## POC #3

**æ¥æº**: [CVE-2023-6019-Zohaibkhan1472_cve-2023-6019.md](../2023/CVE-2023-6019-Zohaibkhan1472_cve-2023-6019.md)

# CVE-2023-6019

> ğŸ“¦ è¯¥CVEæœ‰ **2** ä¸ªç›¸å…³POCä»“åº“

---

## POC #1

**æ¥æº**: [CVE-2023-6019-Clydeston_CVE-2023-6019.md](../2023/CVE-2023-6019-Clydeston_CVE-2023-6019.md)

## CVE-2023-6019 Ray Command Injection in cpu_profile Parameter

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** å‘½ä»¤æ³¨å…¥

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå…è®¸è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** < 2.8.1

**åˆ©ç”¨æ¡ä»¶:** éœ€è¦ç›®æ ‡ç³»ç»Ÿè¿è¡Œå­˜åœ¨æ¼æ´çš„Ray Dashboardä¸”å¯ç½‘ç»œè®¿é—®

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 0%

## è¯¦æƒ…

è¯¥æ¼æ´å­˜åœ¨äº Ray çš„ cpu_profile URL å‚æ•°ä¸­ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„ URLï¼Œåˆ©ç”¨å‘½ä»¤æ³¨å…¥æ¼æ´åœ¨è¿è¡Œ Ray Dashboard çš„ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„æ“ä½œç³»ç»Ÿå‘½ä»¤ï¼Œè€Œæ— éœ€èº«ä»½éªŒè¯ã€‚POC ä»£ç é€šè¿‡å‘ `/worker/cpu_profile` ç«¯ç‚¹å‘é€åŒ…å« base64 ç¼–ç åå¼¹ shell å‘½ä»¤çš„ HTTP GET è¯·æ±‚ï¼Œåˆ©ç”¨ `echo`ã€`base64` å’Œ `sh` å‘½ä»¤æ‰§è¡Œè¯¥å‘½ä»¤ã€‚ 

**æ¼æ´åˆ©ç”¨åˆ†æï¼š**
1.  æ¼æ´ä½äº Ray Dashboard çš„ `/worker/cpu_profile` ç«¯ç‚¹ã€‚
2.  `pid`, `ip`, `duration`, `native`, `format`å‚æ•°å€¼å¯æ§ï¼Œå…¶ä¸­`format`å‚æ•°å­˜åœ¨å‘½ä»¤æ³¨å…¥ã€‚
3.  POC ä»£ç ä½¿ç”¨ `echo`ã€`base64` è§£ç å¹¶ä½¿ç”¨ `sh` æ‰§è¡Œå‘½ä»¤ï¼Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚
4.  POC ä»£ç é¦–å…ˆå°†åå¼¹ shell å‘½ä»¤è¿›è¡Œ base64 ç¼–ç ã€‚
5.  æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„ URLï¼Œå¹¶ä½¿ç”¨ `requests.get` å‘é€è¯·æ±‚ã€‚
6.  ç›®æ ‡ç³»ç»Ÿæ”¶åˆ°è¯·æ±‚åï¼Œä¼šæ‰§è¡Œ URL ä¸­æ³¨å…¥çš„å‘½ä»¤ï¼Œä»è€Œå®ç°åå¼¹ shellã€‚

**æŠ•æ¯’é£é™©åˆ†æï¼š**
æŸ¥çœ‹äº† `CVE-2023-6019.py` å’Œ `README.md` æ–‡ä»¶ï¼Œè¯¥ä»“åº“ä¼¼ä¹æ²¡æœ‰æ˜æ˜¾çš„æŠ•æ¯’ä»£ç ã€‚

ä»£ç çš„ä¸»è¦åŠŸèƒ½æ˜¯åˆ©ç”¨æ¼æ´å®ç°åå¼¹ shellï¼Œå¹¶æ²¡å‘ç°å…¶ä»–æ¶æ„è¡Œä¸ºã€‚æ‰€ä»¥æŠ•æ¯’é£é™©æä½ï¼Œåˆ¤å®šä¸º 0%ã€‚

**é¡¹ç›®åœ°å€:** [Clydeston/CVE-2023-6019](https://github.com/Clydeston/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---

## POC #2

**æ¥æº**: [CVE-2023-6019-FireWolfWang_CVE-2023-6019.md](../2023/CVE-2023-6019-FireWolfWang_CVE-2023-6019.md)

## CVE-2023-6019 - Ray OS Command Injection

**æ¼æ´ç¼–å·:** CVE-2023-6019

**æ¼æ´ç±»å‹:** OS Command Injection

**å½±å“åº”ç”¨:** ray-project/ray

**å±å®³ç­‰çº§:** é«˜å±ï¼Œå¯èƒ½å¯¼è‡´è¿œç¨‹ä»£ç æ‰§è¡Œ

**å½±å“ç‰ˆæœ¬:** <= 2.8.0 (æ¨æµ‹ï¼Œæ¼æ´åº“ä¿¡æ¯æ˜¾ç¤ºå·²ä¿®å¤ç‰ˆæœ¬ä¸º2.8.1+)

**åˆ©ç”¨æ¡ä»¶:** Ray dashboardéœ€è¦å¼€å¯ä¸”ç›®æ ‡ç³»ç»Ÿå­˜åœ¨æ¼æ´ï¼Œæ— éœ€èº«ä»½éªŒè¯

**POC å¯ç”¨æ€§:** æ˜¯

**æŠ•æ¯’é£é™©:** 10%

## è¯¦æƒ…

CVE-2023-6019æ˜¯Rayæ¡†æ¶ä¸­çš„ä¸€ä¸ªæ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥æ¼æ´ï¼Œå­˜åœ¨äºRay dashboardçš„cpu_profile URLå‚æ•°ä¸­ã€‚ç”±äºRay dashboardå¯¹cpu_profileå‚æ•°å¤„ç†ä¸å½“ï¼Œæ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„çš„URLï¼Œå°†æ“ä½œç³»ç»Ÿå‘½ä»¤æ³¨å…¥åˆ°åå°æ‰§è¡Œï¼Œä»è€Œå®ç°è¿œç¨‹ä»£ç æ‰§è¡Œã€‚æ¼æ´åˆ©ç”¨ä»£ç æ˜¾ç¤ºï¼Œå®ƒå°†base64ç¼–ç çš„payloadæ³¨å…¥åˆ°`format`å‚æ•°ä¸­ã€‚Payloadæ˜¯ä¸€ä¸ªåå¼¹shellï¼Œä¼šè¿æ¥åˆ°æ”»å‡»è€…æŒ‡å®šçš„lhostå’Œlportã€‚è¯¥æ¼æ´æ— éœ€èº«ä»½éªŒè¯å³å¯åˆ©ç”¨ã€‚æ£€æŸ¥æŠ•æ¯’é£é™©ï¼šè™½ç„¶ä»£ç åŠŸèƒ½ä¸Šæ˜¯å®ç°äº†æ¼æ´åˆ©ç”¨ï¼Œä½†è€ƒè™‘åˆ°è¯¥POCéœ€è¦ç”¨æˆ·æŒ‡å®šåå¼¹shellçš„IPåœ°å€å’Œç«¯å£ï¼Œä¸”åˆ©ç”¨çš„æ˜¯å…¬å¼€çš„æ¼æ´ä¿¡æ¯ï¼Œå¯ä»¥åˆ¤å®šæŠ•æ¯’çš„å¯èƒ½æ€§è¾ƒä½ã€‚æŠ•æ¯’é£é™©åˆ†æ: ä¸»è¦é£é™©å¯èƒ½åœ¨äºPayloadéƒ¨åˆ†è¢«æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤ï¼Œä½†ç”±äºpayload base64 ç¼–ç ï¼Œå®¹æ˜“è¢«å‘ç°ã€‚æ¼æ´åˆ©ç”¨æ–¹å¼ï¼šæ”»å‡»è€…æ„é€ åŒ…å«æ¶æ„å‘½ä»¤çš„URLï¼Œå‘é€åˆ°å­˜åœ¨æ¼æ´çš„Ray dashboardã€‚æœåŠ¡ç«¯æœªå¯¹URLä¸­çš„cpu_profileå‚æ•°è¿›è¡Œå……åˆ†éªŒè¯ï¼Œå¯¼è‡´æ¶æ„å‘½ä»¤è¢«æ‰§è¡Œï¼Œæ”»å‡»è€…è·å–ç›®æ ‡ç³»ç»Ÿçš„shellã€‚

**æœ‰æ•ˆæ€§ï¼š**  æ ¹æ®æ¼æ´åº“ä¿¡æ¯ã€æœç´¢å¼•æ“ç»“æœï¼ˆå‡è®¾æœ‰æ›´å¤šç»†èŠ‚ï¼‰å’Œæä¾›çš„æ¼æ´åˆ©ç”¨ä»£ç ï¼Œè¯¥æ¼æ´çš„POCä»£ç æ˜¯æœ‰æ•ˆçš„ã€‚

**æŠ•æ¯’é£é™©ï¼š**  POCä»£ç çš„æŠ•æ¯’é£é™©è¯„ä¼°ä¸º10%ã€‚è™½ç„¶ä¸»è¦åŠŸèƒ½æ˜¯æ¼æ´åˆ©ç”¨ï¼Œä½†æ˜¯payloadå­˜åœ¨å¯æ›¿æ¢ä¸ºæ¶æ„æŒ‡ä»¤çš„é£é™©ã€‚

**åˆ©ç”¨æ–¹å¼ï¼š** æ”»å‡»è€…é€šè¿‡æ„é€ æ¶æ„çš„`cpu_profile` URLå‚æ•°ï¼Œåœ¨ç›®æ ‡ç³»ç»Ÿä¸Šæ‰§è¡Œä»»æ„OSå‘½ä»¤ã€‚è¯¥URLåŒ…å«äº†ç»è¿‡Base64ç¼–ç çš„åå¼¹shell payloadã€‚å¦‚æœç›®æ ‡æœºå™¨é…ç½®äº†å…å¯†sudoï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—rootæƒé™çš„shellã€‚å¦åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥è·å¾—å½“å‰ç”¨æˆ·çš„shellã€‚

**é¡¹ç›®åœ°å€:** [FireWolfWang/CVE-2023-6019](https://github.com/FireWolfWang/CVE-2023-6019)

**æ¼æ´è¯¦æƒ…:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)

---



---



---

