## CVE-2025-48384-Git-任意代码执行

**漏洞编号:** CVE-2025-48384

**漏洞类型:** 任意代码执行

**影响应用:** Git

**危害等级:** 高危，可能导致远程代码执行

**影响版本:** < 2.43.7, >= 2.44.0-rc0, < 2.44.4, >= 2.45.0-rc0, < 2.45.4, >= 2.46.0-rc0, < 2.46.4, >= 2.47.0-rc0, < 2.47.3, >= 2.48.0-rc0, < 2.48.2, >= 2.49.0-rc0, < 2.49.1, >= 2.50.0-rc0, < 2.50.1

**利用条件:** 需要用户检出包含恶意配置和submodule的仓库，且submodule包含恶意的post-checkout hook

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2025-48384是Git中的一个高危漏洞，允许攻击者通过构造包含恶意配置的Git仓库，实现在目标机器上执行任意代码。漏洞的根本原因是Git在处理配置文件中的换行符（CRLF）时存在缺陷。当Git读取配置值时，会去除尾部的CRLF，而当写入配置项时，如果值包含尾部CR，则不会进行引用，导致CR丢失。该漏洞利用方式如下：

1.  攻击者创建一个包含恶意配置的Git仓库，该配置会在submodule的路径中包含一个尾部的CR字符。
2.  攻击者创建一个submodule，并在submodule的`.git/hooks/post-checkout`文件中放置恶意脚本。
3.  攻击者创建一个指向恶意脚本的符号链接，该链接的目标路径经过CR处理后，会指向submodule的hooks目录。
4.  用户克隆包含恶意配置的仓库，并且递归初始化submodule，触发post-checkout钩子，执行恶意脚本，从而导致任意代码执行。

提供的POC代码是一个简单的`post-checkout`钩子脚本，它会在`/tmp`目录下创建一个名为`asp-was-here-cve-2025-48384`的文件。该脚本本身没有隐藏的投毒代码，只是用于验证漏洞是否成功利用。

根据搜索引擎的结果，该漏洞是真实存在的，并且有公开的PoC利用代码。多个安全厂商和社区都对此漏洞进行了分析和披露。

综合以上信息，可以得出结论：该漏洞利用是有效的，POC代码本身没有投毒风险，漏洞的利用方式是通过构造包含恶意配置和submodule的仓库，诱导用户克隆并初始化submodule，从而执行任意代码。

**项目地址:** [replicatorbot/CVE-2025-48384](https://github.com/replicatorbot/CVE-2025-48384)

**漏洞详情:** [CVE-2025-48384](https://nvd.nist.gov/vuln/detail/CVE-2025-48384)