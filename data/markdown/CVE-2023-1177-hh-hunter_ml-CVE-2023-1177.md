## CVE-2023-1177-mlflow-路径遍历

**漏洞编号:** CVE-2023-1177

**漏洞类型:** 路径遍历

**影响应用:** mlflow

**危害等级:** 高危，可能导致敏感文件泄露和一定程度的完整性破坏

**影响版本:** < 2.2.1

**利用条件:** 需要网络访问mlflow服务

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2023-1177是mlflow中存在的一个路径遍历漏洞，攻击者可以通过构造包含`..\filename`的恶意路径，访问服务器上的任意文件。漏洞影响版本小于2.2.1。提供的`docker-compose.yml`文件旨在搭建存在漏洞和修复后版本的mlflow环境用于验证。利用方式是，通过发送包含恶意路径的请求到mlflow服务器，服务器在处理该请求时没有充分验证路径的合法性，导致攻击者能够读取或写入到目标文件。Dockerfile分别构建了有漏洞（v2.0.0）和无漏洞（v2.2.0）的mlflow镜像。docker-compose文件定义了mlflow服务，s3存储(minio)，数据库（mysql）等依赖服务，并配置了mlflow使用s3作为artifact存储。通过比较有漏洞和无漏洞环境的行为可以验证漏洞。

**有效性分析：** 根据漏洞库信息和搜索引擎结果，此漏洞利用是有效的。提供的docker-compose文件和Dockerfile能够构建出可用于复现和验证漏洞的环境，验证了漏洞的存在。

**投毒风险分析：** 提供的Dockerfile只是用于构建mlflow镜像，没有发现任何恶意代码或后门。docker-compose文件用于搭建测试环境，也没有发现任何异常。MinIO镜像为官方镜像。因此，投毒风险较低。

**利用方式总结：**
1.  搭建存在漏洞的mlflow环境（版本<2.2.1）。
2.  构造包含`..\filename`的恶意HTTP请求，发送到mlflow服务器。
3.  服务器处理请求时，由于路径遍历漏洞，攻击者可以访问服务器上的任意文件。

综上，该漏洞利用的有效性高，投毒风险低，利用方式清晰。

**项目地址:** [hh-hunter/ml-CVE-2023-1177](https://github.com/hh-hunter/ml-CVE-2023-1177)

**漏洞详情:** [CVE-2023-1177](https://nvd.nist.gov/vuln/detail/CVE-2023-1177)