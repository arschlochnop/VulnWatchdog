## CVE-2024-7966-Google Chrome-Skia Out-of-bounds Memory Access

**漏洞编号:** CVE-2024-7966

**漏洞类型:** Out-of-bounds Memory Access

**影响应用:** Google Chrome

**危害等级:** 高危，可能导致信息泄露、任意代码执行

**影响版本:** < 128.0.6613.84

**利用条件:** 需要用户访问恶意构造的HTML页面，已compromised renderer进程

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2024-7966是Google Chrome Skia图形引擎中的一个越界内存访问漏洞。攻击者可以通过诱使用户访问恶意构造的HTML页面来触发此漏洞。该漏洞允许攻击者在renderer进程中执行越界内存访问，可能导致信息泄露或任意代码执行。 

**有效性分析：**

提供的PoC代码包含一个diff文件 (chromium.diff) 和一个说明文件 (README.txt)。根据 README.txt 中的说明，需要将 chromium.diff 应用到 Chromium 源代码，然后运行 genskpic.py 生成 drawable_picture.skp.hh，并将其移动到 src/gpu/command_buffer/client 目录。 构建并启动浏览器，打开任何页面即可触发PoC，导致GPU进程崩溃。这表明该PoC能够成功利用该漏洞导致崩溃。

**投毒风险分析：**

PoC代码本身用于验证漏洞的存在，目的是使GPU进程崩溃。代码中向font buffer写入恶意构造的skia数据，导致越界读取或写入。虽然这段代码本身是为了证明漏洞的存在，但恶意攻击者可以在此基础上修改PoC，进一步实现任意代码执行。同时，genskpic.py脚本也需要进行安全审计，以防止其中存在恶意代码。总体来说，PoC本身存在少量投毒风险，主要体现在攻击者可能基于此PoC进行二次开发，或者利用genskpic.py进行攻击。因此，投毒风险评估为10%。

**利用方式分析：**

1.  **漏洞原理：** Skia图形引擎在处理特定的图形数据时，由于缺乏边界检查，导致可以访问到分配的缓冲区之外的内存区域。
2.  **利用步骤：**
    *   攻击者构造包含恶意Skia数据的HTML页面。
    *   用户使用受影响版本的Chrome浏览器访问该页面。
    *   Chrome浏览器解析HTML页面，并将Skia数据传递给Skia图形引擎。
    *   Skia图形引擎处理恶意数据时，触发越界内存访问漏洞，导致GPU进程崩溃。
    *   攻击者可以利用此漏洞读取敏感信息或执行任意代码。
3.  **先决条件：**
    *   用户必须使用受影响版本的Chrome浏览器。
    *   攻击者需要能够让用户访问恶意HTML页面（例如，通过钓鱼邮件或恶意广告）。
    *   已经控制了renderer进程。

**项目地址:** [HyHy100/Chrome-Skia-CVE-2024-7966](https://github.com/HyHy100/Chrome-Skia-CVE-2024-7966)

**漏洞详情:** [CVE-2024-7966](https://nvd.nist.gov/vuln/detail/CVE-2024-7966)