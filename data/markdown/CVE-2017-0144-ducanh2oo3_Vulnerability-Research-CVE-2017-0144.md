## CVE-2017-0144 - Windows SMB Remote Code Execution

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行 (RCE)

**影响应用:** Microsoft Windows SMBv1 Server

**危害等级:** 高危，可能导致远程代码执行和系统控制

**影响版本:** Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows 7 SP1, Windows 8.1, Windows Server 2012 Gold and R2, Windows RT 8.1, Windows 10 Gold, 1511, and 1607; and Windows Server 2016

**利用条件:** 目标系统启用SMBv1，攻击者与目标系统网络可达。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-0144 是一个存在于 Microsoft Windows SMBv1 服务器中的远程代码执行漏洞。该漏洞允许远程攻击者通过精心构造的数据包执行任意代码。根据漏洞库信息和搜索结果，该漏洞的威胁等级为高危，并且已经存在公开可用的漏洞利用代码，例如 EternalBlue。 

**有效性:**
从提供的漏洞利用代码看，该POC代码是有效的。漏洞利用方法是利用 EternalBlue 漏洞攻击 Windows SMBv1 协议，通过 Metasploit 框架实现远程代码执行。该代码演示了如何配置和执行攻击，以获取目标系统的 meterpreter shell。

**投毒风险:**
分析提供的代码仓库，仓库中主要为漏洞利用步骤的描述，存在一定投毒风险。风险主要来自于以下几个方面：
1.  **恶意Payload替换:** 攻击者可能将 reverse shell 的payload替换为具有破坏性的恶意代码，如数据擦除、拒绝服务等。在实际渗透中，应仔细检查 payload 的来源和内容。
2.  **后门植入:** 在成功渗透目标系统后，攻击者可能会植入后门程序，以便长期控制目标系统。这些后门程序可能会伪装成系统文件或服务，难以被发现。
3.  **社工攻击:** 仓库作者可能通过 README 文件等途径传播虚假信息或恶意链接，诱导用户下载恶意文件或执行恶意命令。
综合以上因素，该POC代码仓库存在约 10% 的投毒风险，主要集中在替换Payload，植入后门，文件欺骗等方面。

**利用方式:**
1.  **漏洞扫描:** 使用Nmap或Metasploit等工具扫描目标网络，查找启用SMBv1且未修补CVE-2017-0144漏洞的系统。
2.  **漏洞利用:**  配置Metasploit的EternalBlue模块，设置目标IP地址、攻击IP地址、Payload等参数。
3.  **执行攻击:**  运行exploit，如果目标系统存在漏洞，则攻击者可以获得目标系统的远程控制权限（meterpreter shell）。
4.  **后渗透利用:**  攻击者可以使用meterpreter shell执行各种恶意操作，例如：
    *   收集敏感信息
    *   安装后门程序
    *   横向移动到其他系统
    *   执行勒索软件攻击

请注意，利用此漏洞进行攻击属于违法行为，仅限于在授权的渗透测试中使用。

**项目地址:** [ducanh2oo3/Vulnerability-Research-CVE-2017-0144](https://github.com/ducanh2oo3/Vulnerability-Research-CVE-2017-0144)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)