## CVE-2023-6019 Ray Command Injection in cpu_profile Parameter

**漏洞编号:** CVE-2023-6019

**漏洞类型:** 命令注入

**影响应用:** ray-project/ray

**危害等级:** 高危，允许远程代码执行

**影响版本:** < 2.8.1

**利用条件:** 需要目标系统运行存在漏洞的Ray Dashboard且可网络访问

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

该漏洞存在于 Ray 的 cpu_profile URL 参数中。攻击者可以通过构造恶意的 URL，利用命令注入漏洞在运行 Ray Dashboard 的系统上执行任意操作系统命令，而无需身份验证。POC 代码通过向 `/worker/cpu_profile` 端点发送包含 base64 编码反弹 shell 命令的 HTTP GET 请求，利用 `echo`、`base64` 和 `sh` 命令执行该命令。 

**漏洞利用分析：**
1.  漏洞位于 Ray Dashboard 的 `/worker/cpu_profile` 端点。
2.  `pid`, `ip`, `duration`, `native`, `format`参数值可控，其中`format`参数存在命令注入。
3.  POC 代码使用 `echo`、`base64` 解码并使用 `sh` 执行命令，实现远程代码执行。
4.  POC 代码首先将反弹 shell 命令进行 base64 编码。
5.  构造包含恶意命令的 URL，并使用 `requests.get` 发送请求。
6.  目标系统收到请求后，会执行 URL 中注入的命令，从而实现反弹 shell。

**投毒风险分析：**
查看了 `CVE-2023-6019.py` 和 `README.md` 文件，该仓库似乎没有明显的投毒代码。

代码的主要功能是利用漏洞实现反弹 shell，并没发现其他恶意行为。所以投毒风险极低，判定为 0%。

**项目地址:** [Clydeston/CVE-2023-6019](https://github.com/Clydeston/CVE-2023-6019)

**漏洞详情:** [CVE-2023-6019](https://nvd.nist.gov/vuln/detail/CVE-2023-6019)