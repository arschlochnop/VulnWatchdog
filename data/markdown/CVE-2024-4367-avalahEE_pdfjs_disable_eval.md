## CVE-2024-4367-Firefox-PDF.js任意JavaScript执行

**漏洞编号:** CVE-2024-4367

**漏洞类型:** 任意JavaScript执行

**影响应用:** Firefox, Firefox ESR, Thunderbird (PDF.js)

**危害等级:** 高危，允许在PDF.js上下文中执行任意JavaScript代码

**影响版本:** < Firefox 126, < Firefox ESR 115.11, < Thunderbird 115.11

**利用条件:** 用户打开恶意的PDF文件

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2024-4367 是一个存在于 Firefox, Firefox ESR 和 Thunderbird 浏览器中的 PDF.js 组件的漏洞。该漏洞由于在处理字体时缺少类型检查，允许攻击者通过构造恶意的 PDF 文件，在 PDF.js 的上下文中执行任意 JavaScript 代码。这意味着攻击者可能能够窃取信息、执行恶意操作或完全控制受害者的浏览器。

**有效性：**
根据漏洞描述和搜索结果，此漏洞影响特定版本的Firefox, Firefox ESR和Thunderbird，攻击者可以通过构造恶意的PDF文件来触发漏洞。漏洞库信息表明这是一个较为严重的问题。

**投毒风险：**
提供的代码实际上是一个针对Odoo 14.0的修复方案，用于禁用PDF.js中的JavaScript执行，以规避CVE-2024-4367的影响。虽然代码本身不是漏洞利用，但需要谨慎评估。 这个补丁通过替换和修改 PDF.js 相关的文件，试图禁用 JavaScript 执行。 存在一定的投毒风险，如果该模块本身被恶意修改，则可能引入其他漏洞或后门。 例如，`pdfjs_disable_eval/static/src/viewer.html`文件替换了原有的viewer.html，如果新的viewer.html中包含恶意代码，就可能造成危害。 总体来说，投毒风险较低，估计为10%。

**利用方式：**
1.  攻击者创建一个包含恶意 JavaScript 代码的特制 PDF 文件。
2.  受害者使用受影响版本的 Firefox, Firefox ESR 或 Thunderbird 打开该 PDF 文件。
3.  由于缺少类型检查，恶意 JavaScript 代码在 PDF.js 的上下文中执行。
4.  攻击者利用执行的 JavaScript 代码进行恶意活动，例如信息窃取或远程控制。

**项目地址:** [avalahEE/pdfjs_disable_eval](https://github.com/avalahEE/pdfjs_disable_eval)

**漏洞详情:** [CVE-2024-4367](https://nvd.nist.gov/vuln/detail/CVE-2024-4367)