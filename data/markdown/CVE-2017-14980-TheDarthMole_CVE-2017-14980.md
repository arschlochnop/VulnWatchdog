## CVE-2017-14980-Sync Breeze Enterprise-缓冲区溢出

**漏洞编号:** CVE-2017-14980

**漏洞类型:** 缓冲区溢出

**影响应用:** Sync Breeze Enterprise

**危害等级:** 高危，可能导致远程代码执行

**影响版本:** 10.0.28 (也可能影响其他版本，如9.4.28, 10.1.16)

**利用条件:** 需要网络访问目标Sync Breeze Enterprise的Web服务

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-14980是Sync Breeze Enterprise 10.0.28版本中存在的一个缓冲区溢出漏洞。攻击者可以通过向`/login`端点的`username`参数发送超长字符串来触发该漏洞，导致程序崩溃或者执行恶意代码。 

**有效性：**
根据漏洞信息和提供的POC代码，此漏洞是有效的。搜索引擎结果中多个来源都确认了该漏洞的存在，并且提供了受影响的版本信息。`exploit.py`脚本通过精心构造的HTTP POST请求，包含溢出`username`参数，尝试覆盖返回地址并执行shellcode，证明了漏洞的可利用性。

**投毒风险：**
评估`exploit.py`的内容，存在极低的投毒风险。主要的风险点在于shellcode (payload)部分。当前提供的shellcode是使用`msfvenom`生成的反向shell的payload，连接到攻击者的`192.168.0.86:9001`。 如果攻击者的IP和端口被修改为恶意地址，则该payload可能被利用植入后门。`fuzzer.py` 脚本是一个简单的fuzzer，用于确定崩溃时输入的大小，本身无投毒风险。
`README.md`文件只是漏洞的简单描述，不构成投毒。

**利用方式：**
1.  **漏洞定位：** 漏洞存在于Sync Breeze Enterprise的Web登录界面，具体是`/login`端点。
2.  **请求构造：**  攻击者构造一个HTTP POST请求，其中`username`参数包含一个长字符串，长度超过预期的缓冲区大小。
3.  **缓冲区溢出：**  超长字符串覆盖了栈上的返回地址。
4.  **Payload注入：**  在溢出字符串中，包含shellcode，并将其放置在覆盖返回地址之前。
5.  **执行控制劫持：**  服务器尝试返回时，执行流程被劫持到shellcode，从而执行攻击者提供的恶意代码（在本例中，是一个反向shell）。
6.  **利用Badchars：** 注意到`exploit.py`中考虑了badchars，这是缓冲区溢出漏洞利用中常见的步骤，目的是避免shellcode被截断或损坏。通过`msfvenom`生成payload时，需要排除这些badchars。
7. **绕过方式** 考虑到目标可能存在的安全措施,如DEP或ASLR,当前脚本利用硬编码的返回地址(`retn = "\x83\x0c\x09\x10"`)，所以可能需要绕过地址空间布局随机化 (ASLR)。如果ASLR启用，则需要找到其他方法来获取可预测的地址，例如info leak漏洞或者在未启用ASLR的模块中寻找gadgets.

**项目地址:** [TheDarthMole/CVE-2017-14980](https://github.com/TheDarthMole/CVE-2017-14980)

**漏洞详情:** [CVE-2017-14980](https://nvd.nist.gov/vuln/detail/CVE-2017-14980)