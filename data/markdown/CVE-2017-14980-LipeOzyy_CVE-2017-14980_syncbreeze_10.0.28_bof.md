## CVE-2017-14980-Sync Breeze Enterprise-缓冲区溢出

**漏洞编号:** CVE-2017-14980

**漏洞类型:** 缓冲区溢出

**影响应用:** Sync Breeze Enterprise

**危害等级:** 高危，可能导致远程代码执行

**影响版本:** 10.0.28

**利用条件:** 需要网络访问目标Sync Breeze Enterprise服务器，并且服务器的/login接口存在漏洞。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-14980 是 Sync Breeze Enterprise 10.0.28 版本中的一个缓冲区溢出漏洞，存在于/login接口。攻击者可以通过向username参数发送超长字符串来触发该漏洞。提供的漏洞利用代码 exploit.c 演示了如何利用此漏洞。漏洞利用方法如下：

1.  **漏洞原理：** 由于 Sync Breeze Enterprise 在处理登录请求时，对 username 或 password 参数的长度没有进行充分的验证，导致攻击者可以发送一个超长的username参数，覆盖栈上的数据，从而控制程序的执行流程。
2.  **利用过程：**
    *   攻击者需要首先编译提供的 exploit.c 文件。编译命令是 `gcc exploit.c -o exploit`。
    *   修改 exploit.c 文件中的 `SERVER_IP` 为目标 Sync Breeze Enterprise 服务器的 IP 地址，并设置好shell_reverse_tcp的`LHOST`和`LPORT`。
    *   执行编译后的 exploit 文件 `./exploit`，程序会向目标服务器的 /login 接口发送一个精心构造的 HTTP POST 请求。
    *   这个 POST 请求的 password 字段包含一个超长的字符串，其中包含了用于覆盖 EIP 寄存器的地址以及 shellcode。
    *   服务器在处理请求时，由于缓冲区溢出漏洞，EIP 寄存器会被覆盖为攻击者控制的地址，从而执行 shellcode。
    *   shellcode 会反弹一个 shell 到攻击者的机器，攻击者就可以在目标服务器上执行任意命令。

3.  **有效性评估：** 根据漏洞库信息、搜索引擎结果以及提供的漏洞利用代码，该漏洞是真实存在的，且漏洞利用代码可以有效利用该漏洞实现远程代码执行。

4.  **投毒风险评估：** exploit.c 代码本身的功能是实现漏洞利用，主要逻辑是构造payload发送到目标机器上，使其产生缓冲区溢出。虽然shellcode部分，可以植入恶意代码，但提供的exp已经明确说明了shellcode的功能(反弹shell)，因此判定为投毒代码的概率较低。但是，shellcode本身是否完全符合描述需要进一步分析。结合代码分析来看，存在投毒风险，因为这个shellcode反弹shell之后，攻击者完全可以做任何事情，但是不是作者预先埋好的后门，不属于投毒。shellcode的部分是可以使用msfvenom生成的，灵活性高，所以这部分判定为有一定风险。

**结论：**该漏洞真实存在，可以被成功利用。虽然提供的EXP有一定风险,需要使用者自行检测shellcode的安全问题，但是总体风险还是比较低。


**项目地址:** [LipeOzyy/CVE-2017-14980_syncbreeze_10.0.28_bof](https://github.com/LipeOzyy/CVE-2017-14980_syncbreeze_10.0.28_bof)

**漏洞详情:** [CVE-2017-14980](https://nvd.nist.gov/vuln/detail/CVE-2017-14980)