## CVE-2017-8917-Joomla!-SQL注入

**漏洞编号:** CVE-2017-8917

**漏洞类型:** SQL注入

**影响应用:** Joomla!

**危害等级:** 高危，可能导致数据泄露和远程代码执行

**影响版本:** 3.7.x before 3.7.1

**利用条件:** 需要目标Joomla!站点版本为3.7.0，且允许外部网络访问。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-8917是Joomla! 3.7.0版本中存在的一个SQL注入漏洞。根据漏洞库信息和搜索引擎结果，该漏洞允许攻击者通过未经授权的SQL命令执行来读取、修改或删除数据库中的数据。漏洞出现在`com_fields`组件中，攻击者可以利用`list[fullordering]`参数进行SQL注入攻击。

**漏洞利用方式:**

1.  攻击者构造包含恶意SQL代码的URL，利用`index.php?option=com_fields&view=fields&layout=modal&list[fullordering]=`作为注入点。
2.  攻击者利用`extractvalue()`函数和`concat()`函数，将SQL查询结果注入到XML数据中，然后从响应中提取数据。POC代码使用`information_schema.tables`来获取表名，并从`{prefix}_users`表中提取用户名、邮箱和密码hash。
3.  POC代码通过循环爆破的方式，每次获取密码hash的一部分，最终获取完整的密码hash。

**有效性：**

提供的POC代码针对Joomla! 3.7.0，利用`com_fields`组件中的SQL注入漏洞。该代码能够提取数据库前缀、用户名、邮箱和密码hash，表明该POC代码是有效的。

**投毒风险：**

该漏洞利用代码本身相对简单，主要是利用SQL注入读取数据。检查了`cve20178917.py`脚本，没有发现明显的恶意代码或者后门。脚本中的依赖`art`可能存在字体方面的潜在风险，但是该风险较低。`beautifulsoup4`被广泛使用，风险更低。综合评估，投毒的风险较低，大约为10%。虽然没发现恶意代码，但由于代码来自互联网，仍需谨慎使用。


**项目地址:** [gmohlamo/CVE-2017-8917](https://github.com/gmohlamo/CVE-2017-8917)

**漏洞详情:** [CVE-2017-8917](https://nvd.nist.gov/vuln/detail/CVE-2017-8917)