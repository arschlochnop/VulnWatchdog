## CVE-2023-33246-Apache RocketMQ-远程代码执行

**漏洞编号:** CVE-2023-33246

**漏洞类型:** 远程代码执行

**影响应用:** Apache RocketMQ

**危害等级:** 高危，可能导致服务器被完全控制

**影响版本:** <= 5.1.0

**利用条件:** RocketMQ的NameServer, Broker或Controller组件暴露在公网上，且没有进行严格的权限验证。

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2023-33246是Apache RocketMQ中的一个远程代码执行漏洞。根据漏洞库信息和搜索结果，攻击者可以利用RocketMQ的配置更新功能，在未授权的情况下执行任意命令，从而控制服务器。

**有效性：**
根据提供的PoC代码，该漏洞利用的有效性较高。该PoC通过构造恶意的配置更新请求，其中包含可以执行任意命令的payload（curl {{interactsh-url}}），然后将该请求发送到RocketMQ的服务器端口(通常是10911端口)。如果服务器存在漏洞，就会执行该命令。

**投毒风险：**
分析提供的PoC代码，未发现明显的投毒代码。PoC代码的主要功能是利用漏洞执行命令，没有发现任何额外恶意行为或后门。Payload是`curl {{interactsh-url}}`，只是用来验证漏洞是否存在，并非真正的恶意指令，所以投毒风险评估为0%。

**利用方式：**
1.  **漏洞发现：** 确认目标系统运行着存在漏洞的Apache RocketMQ版本（<= 5.1.0）。
2.  **组件确认：** 确认NameServer, Broker或Controller组件暴露在公网上且未做鉴权。
3.  **构造Payload：** 构造包含恶意命令的Payload。PoC代码中使用`curl {{interactsh-url}}`进行验证，实际利用中可以替换为其他命令。
4.  **发送请求：** 将构造好的Payload封装在配置更新请求中，发送到目标服务器的端口（通常是10911）。
5.  **执行命令：** 如果漏洞存在且利用成功，服务器将执行Payload中的恶意命令。

总而言之，此漏洞的利用方式较为简单，PoC的利用有效性较高，且PoC代码本身未发现投毒风险。

**项目地址:** [d0rb/CVE-2023-33246](https://github.com/d0rb/CVE-2023-33246)

**漏洞详情:** [CVE-2023-33246](https://nvd.nist.gov/vuln/detail/CVE-2023-33246)