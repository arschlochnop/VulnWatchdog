## CVE-2017-0144 - Windows SMB 远程代码执行

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行 (RCE)

**影响应用:** Windows SMBv1

**危害等级:** 高危，可能导致系统完全控制

**影响版本:** Windows Vista SP2; Windows Server 2008 SP2 and R2 SP1; Windows 7 SP1; Windows 8.1; Windows Server 2012 Gold and R2; Windows RT 8.1; and Windows 10 Gold, 1511, and 1607; and Windows Server 2016

**利用条件:** 目标系统开启SMBv1服务，攻击者与目标系统网络可达

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-0144 是一个存在于 Windows SMBv1 服务器中的远程代码执行漏洞，也被称为 EternalBlue。攻击者可以通过构造特制的 SMB 数据包发送到目标服务器，从而在目标系统上执行任意代码。 

**有效性：**
根据漏洞库信息和搜索结果，CVE-2017-0144 是一个已经公开且存在有效利用代码的漏洞。搜索结果中大量的文章和报告都证实了该漏洞的存在以及其严重性。提供的漏洞利用代码（AUTOBLUE）是一个自动化工具，它集成了 Nmap 扫描和 Metasploit 攻击模块，可以简化漏洞利用过程，进一步证明了此漏洞的利用可行性。

**投毒风险：**
尽管 AUTOBLUE 工具旨在自动化 EternalBlue 漏洞的利用，但代码中可能存在潜在的投毒风险。虽然提供的代码段主要包含许可信息、README 文件和脚本的基本框架，但仍需要仔细审查 `autoblue.sh` 脚本的具体实现，以确定是否存在恶意代码。

*   **LICENSE & README:** 这两个文件看起来没有恶意内容，主要用于声明版权和描述工具的功能。
*   **autoblue.sh:** 投毒风险主要集中在这个脚本中。如果脚本包含从外部源下载或执行代码的部分，或者包含未经授权的系统修改，则可能存在投毒风险。例如，脚本如果包含下载并执行未知来源的 Metasploit 模块或 shellcode，则可能被利用于植入后门或执行其他恶意操作。
*   **风险评估:** 由于只提供了部分文件内容，无法完全确定投毒风险。需要检查完整的 `autoblue.sh` 脚本，特别是网络请求和代码执行相关部分。综合考虑，将投毒风险评估为10%。

**利用方式：**
EternalBlue (CVE-2017-0144) 的利用方式如下：

1.  **漏洞扫描：** 使用 Nmap 等工具扫描目标网络，查找开启 SMBv1 服务的 Windows 系统。
2.  **漏洞验证：** 确定目标系统是否存在 MS17-010 漏洞（EternalBlue）。
3.  **漏洞利用：** 使用 Metasploit 的 `exploit/windows/smb/ms17_010_eternalblue` 模块，配置目标 IP 地址、攻击载荷等参数。
4.  **执行攻击：** 运行攻击模块，向目标系统发送特制的 SMB 数据包，触发漏洞并执行任意代码。
5.  **获取控制权：** 成功利用漏洞后，攻击者可以在目标系统上获得 shell，从而实现远程控制。

AUTOBLUE 工具通过自动化以上步骤，简化了 EternalBlue 漏洞的利用过程。

**项目地址:** [AtithKhawas/autoblue](https://github.com/AtithKhawas/autoblue)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)