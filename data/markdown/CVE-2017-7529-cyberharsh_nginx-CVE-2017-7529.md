## CVE-2017-7529-Nginx越界读取缓存漏洞

**漏洞编号:** CVE-2017-7529

**漏洞类型:** 整数溢出

**影响应用:** Nginx

**危害等级:** 高危，可能导致敏感信息泄露

**影响版本:** 0.5.6 - 1.13.2

**利用条件:** Nginx开启反向代理和缓存功能

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2017-7529是Nginx range filter模块中的一个整数溢出漏洞。攻击者可以通过构造包含恶意Range头的HTTP请求，触发整数溢出，导致Nginx读取缓存文件中位于HTTP返回包体之前的文件头和HTTP返回包头等敏感信息。

**有效性：**
提供的POC代码是有效的。Dockerfile用于构建存在漏洞的Nginx环境，default.conf配置Nginx开启反向代理和缓存，poc.py利用漏洞发送恶意请求，读取缓存内容。

**投毒风险：**
通过对提供的Dockerfile，default.conf，docker-compose.yml和poc.py等文件内容进行分析，未发现任何可疑的、恶意的代码，因此不存在投毒代码。

**利用方式：**
1.  Nginx配置为反向代理服务器，并开启缓存功能。
2.  客户端首次请求某个资源，Nginx将该资源缓存到本地。
3.  攻击者构造包含特殊Range头的HTTP请求，例如`Range: bytes=-600,-9223372036854774591`。
4.  Nginx处理该请求时，由于整数溢出，导致计算出的读取位置为负数。
5.  Nginx从缓存文件中读取负偏移位置的数据，从而泄露敏感信息，如文件头、HTTP响应头等。

**项目地址:** [cyberharsh/nginx-CVE-2017-7529](https://github.com/cyberharsh/nginx-CVE-2017-7529)

**漏洞详情:** [CVE-2017-7529](https://nvd.nist.gov/vuln/detail/CVE-2017-7529)