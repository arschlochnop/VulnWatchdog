## CVE-2017-8917-Joomla-SQL注入

**漏洞编号:** CVE-2017-8917

**漏洞类型:** SQL注入

**影响应用:** Joomla

**危害等级:** 高危，可能导致数据泄露和远程代码执行

**影响版本:** 3.7.x before 3.7.1

**利用条件:** 需要Joomla! 3.7.0版本，目标开启web服务并且可以访问

**POC 可用性:** 是

**投毒风险:** 1%

## 详情

CVE-2017-8917是Joomla! 3.7.x版本在3.7.1之前存在的一个SQL注入漏洞。根据漏洞库信息和搜索结果，攻击者可以通过未明确的向量执行任意SQL命令。提供的漏洞利用代码是一个Python脚本，针对TryHackMe Dailybugle CTF设计，但可以用于通用漏洞利用。脚本通过`com_fields`组件中的一个参数`list[fullordering]`注入SQL代码。利用方式是修改HTTP请求的参数，构造恶意的SQL查询，从而获取数据库中的敏感信息。风险包括未经授权的访问、数据窃取和潜在的Joomla!服务器完全控制。

**有效性评估：**
根据漏洞库信息、搜索结果和漏洞利用代码，可以判断该POC代码有效。漏洞利用代码中包含`main.py`，实现了SQL注入，并且提供了针对性的利用方式。搜索结果也表明了该漏洞的存在和危害。

**投毒风险评估：**
审查了提供的Python脚本 `main.py`，没有发现明显的恶意代码或后门。脚本主要功能是构造SQL注入payload并发送HTTP请求，目的是从目标Joomla!服务器提取数据。`docker-compose.yaml`文件用于快速部署一个存在漏洞的Joomla!环境进行测试，没有发现可疑配置。`README.md` 也声明了仅用于教育目的。

**漏洞利用方式：**
1.  确定目标Joomla!版本为3.7.0（或3.7.x且低于3.7.1）。
2.  获取CSRF Token，访问`index.php/component/users/?view=login` 获取token.
3.  使用Python脚本 `main.py`，指定目标Joomla!服务器的host、port和URI。通过`--host`参数指定目标服务器， 例如 `python3 main.py --host x.x.x.x`
4.  脚本会利用`com_fields`组件的`list[fullordering]`参数进行SQL注入。
5.  成功利用后，攻击者可以执行任意SQL查询，例如获取用户名、密码哈希等敏感信息。

**项目地址:** [BaptisteContreras/CVE-2017-8917-Joomla](https://github.com/BaptisteContreras/CVE-2017-8917-Joomla)

**漏洞详情:** [CVE-2017-8917](https://nvd.nist.gov/vuln/detail/CVE-2017-8917)