## CVE-2025-56521 Clang编译器优化错误和Clang编译崩溃漏洞

**漏洞编号:** CVE-2025-56521

**漏洞类型:** 编译器错误/崩溃

**影响应用:** Clang

**危害等级:** 中危/高危，可能导致程序行为异常或拒绝服务

**影响版本:** 14.0.0, 13-15

**利用条件:** 需要使用受影响的Clang版本编译特定代码

**POC 可用性:** 是

**投毒风险:** 1%

## 详情

根据提供的漏洞信息和利用代码，存在两个Clang相关的漏洞。

**CVE-2025-56521：**
该漏洞出现在使用Clang 14.0.0以-O2优化级别编译包含全局指针操作和类型转换的循环代码时，编译器会产生错误的算术结果。提供的C代码 `test.c` 展示了这个问题。GCC编译的结果与Clang不同，说明Clang确实存在优化错误。

**利用方式：**
 1. 编写特定的C/C++代码，包含全局指针操作和类型转换的循环。
 2. 使用Clang 14.0.0，并启用-O2或更高级别的优化选项进行编译。
 3. 运行编译后的程序，观察结果是否与预期不符。

**Clang编译崩溃漏洞：**
Clang 13-15在编译包含特定C++20代码时会崩溃。这段代码定义了一个局部类，该类与外部作用域的枚举具有相同的名称，并尝试使用枚举值初始化该类。此外，还对无效对象使用了typeid运算符。

**利用方式：**
 1. 编写符合描述的C++20代码（如`crash.cpp`）。
 2. 使用Clang 13-15进行编译（例如，`clang++-13 -std=c++20 crash.cpp`）。
 3. 编译器应该崩溃。

**有效性：**
提供的POC代码 `test.c` 和 `crash.cpp` 均有效，分别可以触发Clang优化错误和编译崩溃。

**投毒风险：**
文件 `/tmp/0c235054e6ae13d637e55a8b60beea0b/bug` 和 clang_bug.zip ，其中内容为poc验证的源码，不太可能包含后门代码，因此投毒的风险较低。该仓库中作者的投毒风险预估为1%。主要依据是：提供的代码目的是展示编译器的错误或崩溃，并非一个完整的、可部署的应用程序，因此被植入恶意代码的机会相对较小。其次，POC的本质是重现漏洞，其代码通常较为精简直接，隐藏恶意代码比较困难，增加恶意代码反而可能影响POC的有效性。

**项目地址:** [Dong-hui-li/CVE-2025-56521andCVE-2025-56522](https://github.com/Dong-hui-li/CVE-2025-56521andCVE-2025-56522)

**漏洞详情:** [CVE-2025-56521](https://nvd.nist.gov/vuln/detail/CVE-2025-56521)