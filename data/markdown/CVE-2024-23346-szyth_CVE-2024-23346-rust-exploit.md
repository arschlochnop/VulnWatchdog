## CVE-2024-23346-pymatgen-代码执行

**漏洞编号:** CVE-2024-23346

**漏洞类型:** 代码执行

**影响应用:** pymatgen

**危害等级:** 高危，可导致远程代码执行

**影响版本:** < 2024.2.20

**利用条件:** 需要处理恶意构造的JonesFaithfulTransformation transformation_string

**POC 可用性:** 是

**投毒风险:** 0%

## 详情

CVE-2024-23346 存在于 pymatgen 库的 `JonesFaithfulTransformation.from_transformation_str()` 方法中，该方法在版本 2024.2.20 之前存在安全漏洞。该方法不安全地使用 `eval()` 来处理输入，导致在解析不可信输入时可以执行任意代码。

**有效性：**
根据漏洞库信息和搜索引擎结果，此漏洞的POC是有效的。多个来源确认了该漏洞的存在以及通过构造恶意输入执行任意代码的可能性。

**投毒风险：**
提供的代码片段是 `Cargo.lock` 文件，它列出了 Rust 项目的依赖项及其版本和校验和。`Cargo.lock` 文件本身不包含任何可执行代码或逻辑，因此，它不构成任何形式的投毒风险。

**利用方式：**
1.  攻击者需要找到使用 `pymatgen` 库并且允许用户提供 `JonesFaithfulTransformation` 字符串的地方。
2.  攻击者构造一个包含恶意代码的 `JonesFaithfulTransformation` 字符串。由于漏洞在于`eval()`的使用，攻击者可以在字符串中插入任何Python代码，例如执行系统命令。
3.  当易受攻击的 `pymatgen` 库解析该恶意字符串时，`eval()` 将执行攻击者插入的恶意代码，从而导致任意代码执行。

此漏洞的利用依赖于 `pymatgen` 应用程序接收并解析不受信任的输入，例如用户提供的文件或数据。应用程序需要在使用 `JonesFaithfulTransformation.from_transformation_str()`  解析之前，仔细审查输入内容。

**项目地址:** [szyth/CVE-2024-23346-rust-exploit](https://github.com/szyth/CVE-2024-23346-rust-exploit)

**漏洞详情:** [CVE-2024-23346](https://nvd.nist.gov/vuln/detail/CVE-2024-23346)